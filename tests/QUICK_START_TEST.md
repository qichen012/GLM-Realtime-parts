# ⚡ Function Call 测试快速开始

## 🚀 运行测试

```bash
cd /Users/xwj/Desktop/gpt-realtime-demo
python tests/test_function_call.py
```

## ✅ 预期结果

如果一切正常，你会看到：

```
======================================================================
📊 总体测试报告
======================================================================
总测试数: 21
✅ 通过: 21
❌ 失败: 0
通过率: 100.0%

🎉 所有测试通过！Function Call 功能正常！
======================================================================
```

## 📋 测试覆盖

### ✅ 测试 1: Function 定义加载（7个测试）
- 加载 3 个函数定义
- 验证函数结构
- 测试按名称获取函数

### ✅ 测试 2: Mock Function 执行（4个测试）
- `plan_trip` 执行
- `book_ticket` 执行
- `book_hotel` 执行
- 未知函数错误处理

### ✅ 测试 3: WebSocket 消息处理（4个测试）
- 函数执行成功
- 发送响应消息
- 验证消息类型

### ✅ 测试 4: 错误处理（3个测试）
- 参数缺失处理
- 网络错误处理
- JSON 解析错误处理

### ✅ 测试 5: 集成场景（3个测试）
- 完整旅行规划流程
- 连续调用多个 function
- 服务失败处理

## 📚 详细文档

查看 [README_FUNCTION_CALL_TEST.md](README_FUNCTION_CALL_TEST.md) 获取完整文档。

## 💡 提示

- ✨ 所有测试使用 Mock，不需要真实的 Agent 服务
- ⚡ 测试运行速度很快（< 5秒）
- 🔧 如需测试真实 Agent，请修改测试脚本中的 Mock

## 🎯 下一步

1. **运行真实的 Agent 测试**
   ```bash
   # 确保 Claude Code 服务运行中
   # 然后修改测试脚本，移除 @patch 装饰器
   ```

2. **添加更多测试用例**
   编辑 `test_function_call_data.json`

3. **集成到 CI/CD**
   ```bash
   pytest tests/test_function_call.py
   ```

---

✅ 测试准备就绪！开始使用吧！

